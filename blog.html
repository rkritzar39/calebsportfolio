<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Blog</title>
    <!-- Main Stylesheets -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="blog.css"> <!-- The new "Awesome Theme" stylesheet -->
    <link rel="stylesheet" href="settings.css">

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body class="dark-mode">

    <!-- Header Section -->
    <header class="main-header">
        <h1>My Awesome Blog</h1>
        <a href="index.html" class="home-link">
            <i class="fas fa-home"></i> Back to Main Site
        </a>
    </header>

    <!-- Main Blog Content Container -->
    <main class="blog-container">

        <!-- Search and Filter Controls -->
        <section class="filter-controls">
            <!-- This wrapper is the key to positioning the icon -->
            <div class="search-wrapper">
                <input type="text" id="search-input" class="search-input" placeholder="Search posts...">
                <i class="fas fa-search search-icon"></i>
            </div>
            <div id="category-filters" class="category-filters">
                <!-- JavaScript will inject category buttons here -->
            </div>
        </section>

        <!-- Featured Post Section -->
        <section id="featured-post-container" class="featured-post-container">
            <!-- JavaScript will inject the featured post here -->
        </section>

        <!-- Title for the main post grid -->
        <h2 class="section-title">All Posts</h2>

        <!-- Grid for displaying all other posts -->
        <section id="posts-grid" class="posts-grid">
            <!-- JavaScript will inject post cards here -->
        </section>

    </main>

    <!-- Main Scripts -->
    <!-- Make sure firebase-init.js is loaded first if it exports the db instance -->
    <script type="module" src="firebase-init.js"></script> 
    <script type="module" src="displayShoutouts.js"></script>
    <script src="common.js"></script>
    <script src="settings.js"></script>
   <nav class="ios26-toolbar" id="ios26-toolbar">
  <div class="active-pill" id="active-pill" aria-hidden="true"></div>

  <a href="index.html" class="toolbar-item" data-color="#007aff">
    <i class="fa-solid fa-house"></i>
    <span>Home</span>
  </a>

  <a href="blog.html" class="toolbar-item" data-color="#e63946">
    <i class="fa-solid fa-pen-nib"></i>
    <span>Blog</span>
  </a>

  <a href="merchandise.html" class="toolbar-item" data-color="#ff9500">
    <i class="fa-solid fa-bag-shopping"></i>
    <span>Merch</span>
  </a>

  <a href="settings.html" class="toolbar-item" data-color="#34c759">
    <i class="fa-solid fa-gear"></i>
    <span>Settings</span>
  </a>
</nav>
    
<script>
const bar = document.getElementById("ios26-toolbar");
const items = [...bar.querySelectorAll(".toolbar-item")];
const pill = document.getElementById("active-pill");

let active = items.find(i => i.href === location.href) || items[0];
let dragging = false, lastY = window.scrollY;

function tint(el){ el.style.setProperty("--tint", el.dataset.color); }
function movePill(el, stretch = 1, instant = false){
  const r = el.getBoundingClientRect();
  const p = bar.getBoundingClientRect();
  const w = Math.max(90, Math.min(120, r.width + 14)) * stretch;
  const x = r.left - p.left + (r.width - w)/2;
  if(instant) pill.style.transition = "none";
  pill.style.left = `${x}px`;
  pill.style.width = `${w}px`;
  if(instant)
    requestAnimationFrame(() => pill.style.transition =
      "left .35s cubic-bezier(.25,1,.5,1), width .35s cubic-bezier(.25,1,.5,1), background 0.3s ease");
}

/* Initialize */
items.forEach(tint);
active.classList.add("active");
movePill(active, 1, true);

/* Hide toolbar on scroll */
window.addEventListener("scroll", () => {
  if(window.scrollY > lastY && window.scrollY > 100)
    bar.classList.add("hide");
  else bar.classList.remove("hide");
  lastY = window.scrollY;
});

/* Press & drag */
items.forEach(item => {
  item.addEventListener("pointerdown", () => {
    dragging = true;
    items.forEach(i => i.classList.remove("drag-over"));
    item.classList.add("drag-over");
    movePill(item, 1.1, true);
  });
  item.addEventListener("pointerenter", () => {
    if(!dragging) return;
    items.forEach(i => i.classList.remove("drag-over"));
    item.classList.add("drag-over");
    movePill(item, 1.15, true);
  });
  item.addEventListener("pointerup", finalize);
});
window.addEventListener("pointermove", e => {
  if(!dragging) return;
  const stretch = 1 + Math.min(Math.abs(e.movementX)/20, 0.3);
  movePill(document.querySelector(".toolbar-item.drag-over") || active, stretch, true);
});
window.addEventListener("pointerup", finalize);

function finalize(){
  if(!dragging) return;
  dragging = false;
  const target = document.querySelector(".toolbar-item.drag-over") || active;
  items.forEach(i => i.classList.remove("drag-over","active"));
  target.classList.add("active");
  active = target;
  movePill(active, 1);
  tint(active);
  setTimeout(() => location.href = active.href, 160);
}
</script>
</body>
</html>
