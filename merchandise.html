<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Shop official Bus Army Dude merchandise. View what's in stock, on sale, and coming soon.">
    <title>Merchandise - Caleb's Profile</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="ai-features.css">
    <link rel="stylesheet" href="settings.css">
    <link rel="stylesheet" href="theme-overrides.css">
    <link rel="stylesheet" href="merchandise.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-E0RSQS1MS7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-E0RSQS1MS7');
    </script>
    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
    <meta name="theme-color" content="#ffffff"/>
</head>   
<body class="dark-mode">

<div id="maintenanceModeMessage" style="display: none; background-color: var(--bg-color); color: var(--text-color); text-align: center; padding: 30px; border: 2px solid var(--accent-color); border-radius: 16px; box-shadow: 0 8px 20px var(--shadow-color); margin: 20px;">
    <h2 style="color: var(--accent-color); font-family: 'Inter', sans-serif; font-size: 2em; margin-bottom: 20px;">We're Performing Some Upgrades!</h2>
    <p style="font-family: 'Roboto', sans-serif; font-size: 1.2em; line-height: 1.6; margin-bottom: 20px;">
        Our website is currently undergoing scheduled maintenance to improve your experience. We’re making some big updates, so things will be smoother, faster, and even better when we're done.
    </p>
    <p style="font-family: 'Roboto', sans-serif; font-size: 1.2em; line-height: 1.6; margin-bottom: 20px;">
        During this time, certain features may be temporarily unavailable, and you might not be able to access all parts of the site. But don’t worry, we’re working hard to get everything back up and running as quickly as possible.
    </p>
    <p style="font-family: 'Roboto', sans-serif; font-size: 1.2em; line-height: 1.6; margin-bottom: 20px;">
        Please check back soon, or follow our social media pages for updates on when we’ll be live again. We appreciate your patience and can’t wait to show you what’s new!
    </p>
    <p style="font-family: 'Roboto', sans-serif; font-size: 1.3em; font-weight: bold;">
        Thank you for your understanding!
    </p>
</div>
    
    <header>
        <div class="header-content">
            <h1>Merchandise</h1>
                <button class="home-button" onclick="window.location.href='/'">Home</button>
        </div>
    </header>

    <div class="category-dropdown">
        <label for="categories">Categories:</label>
        <select id="categories" name="categories">
            </select>
    </div>

    <h2 id="section-title">All Products</h2>
    <p id="product-count">0 products</p>

    <div id="product-grid" class="product-grid"></div>

    <footer>
        <p>© <span id="year"></span> Caleb Kritzar. All Rights Reserved.</p>
    </footer>

    <script src="common.js"></script>
    <script src="globalSettings.js"></script>
    <script src="script.js"></script>
    <script src="ai-features.js"></script>
    <script src="settings.js"></script>
    <script src="merchandise.js"></script> 

      <!-- Bottom Liquid Glass Toolbar -->
<nav class="ios19-bubblebar" role="tablist" aria-label="Primary navigation">
  <a class="tab" href="index.html"><i class="fa-solid fa-house"></i><span>Home</span></a>
  <a class="tab" href="merchandise.html"><i class="fa-solid fa-bag-shopping"></i><span>Merch</span></a>
  <a class="tab" href="settings.html"><i class="fa-solid fa-gear"></i><span>Settings</span></a>
  <div class="bubble" aria-hidden="true"></div>
</nav>
    
<script>
(() => {
  const bar    = document.querySelector('.ios19-bubblebar');
  const tabs   = [...bar.querySelectorAll('.tab')];
  const bubble = bar.querySelector('.bubble');
  const bs     = bubble.style;

  // Determine active tab by URL
  let active = tabs.findIndex(t => t.getAttribute('href') === (location.pathname.split('/').pop() || 'index.html'));
  if (active < 0) active = 0;

  // Cache rectangles
  let rects = [], barRect;
  const updateRects = () => {
    barRect = bar.getBoundingClientRect();
    rects = tabs.map(t => t.getBoundingClientRect());
  };
  window.addEventListener('resize', updateRects, { passive: true });
  updateRects();

  // Move bubble to tab i (auto width, neat side insets)
  const moveBubble = (i, animate = true) => {
    const r = rects[i];
    const inset = 4; // left/right space so it doesn't touch
    const x = r.left - barRect.left + inset;
    const w = r.width - inset*2;

    bs.setProperty('--x', `${x}px`);
    bs.setProperty('--w', `${w}px`);
    tabs.forEach((t, k) => t.classList.toggle('active', k === i));

    if (animate) {
      bubble.classList.remove('pop');
      void bubble.offsetWidth;
      bubble.classList.add('pop');
    }
  };
  requestAnimationFrame(() => moveBubble(active, false));

  // ----- Drag (optimized, no jank) -----
  let dragging = false, startX = 0, startLeft = 0, currentLeft = 0;
  let lastDX = 0, lastT = 0, rafId = null, velocity = 0;

  function applyRefraction() {
    // Liquid skew/scale based on velocity (GPU transform only)
    const distort = Math.min(6, Math.abs(velocity) * 0.15);
    const dir = velocity > 0 ? 1 : -1;
    bubble.style.transform = `translateZ(0) scale(${1 + Math.abs(velocity) * 0.0006}) skewX(${distort * dir}deg)`;
    velocity *= 0.85;
    if (Math.abs(velocity) > 0.2) rafId = requestAnimationFrame(applyRefraction);
    else bubble.style.transform = '';
  }

  const onDown = e => {
    dragging = true;
    startX = (e.touches ? e.touches[0].clientX : e.clientX);
    startLeft = parseFloat(bs.getPropertyValue('--x')) || 0;
    bubble.classList.add('drag');
    updateRects();
  };

  const onMove = e => {
    if (!dragging) return;
    const x = (e.touches ? e.touches[0].clientX : e.clientX);
    const dx = x - startX;

    const now = performance.now();
    const dt = now - (lastT || now);
    velocity = (dx - lastDX) / Math.max(dt, 16); // px/ms
    lastDX = dx; lastT = now;

    const max = bar.offsetWidth - bubble.offsetWidth - 4;
    currentLeft = Math.max(4, Math.min(max, startLeft + dx));
    bs.setProperty('--x', `${currentLeft}px`);

    // Crossfade icons by proximity to bubble center
    const center = barRect.left + currentLeft + bubble.offsetWidth / 2;
    rects.forEach((r, i) => {
      const diff = Math.abs(center - (r.left + r.width / 2));
      const hot  = Math.max(0, 1 - diff / (r.width * 0.9));
      tabs[i].style.setProperty('--hot', hot.toFixed(2));
    });

    if (!rafId) rafId = requestAnimationFrame(applyRefraction);
  };

  const onUp = () => {
    if (!dragging) return;
    dragging = false;
    bubble.classList.remove('drag');
    cancelAnimationFrame(rafId); rafId = null;
    bubble.style.transform = '';

    // Snap to nearest tab center
    const center = barRect.left + currentLeft + bubble.offsetWidth / 2;
    active = rects.reduce((a, r, i) => {
      const ca = rects[a].left + rects[a].width / 2;
      const ci = r.left + r.width / 2;
      return Math.abs(center - ci) < Math.abs(center - ca) ? i : a;
    }, 0);

    moveBubble(active);
    setTimeout(() => (window.location.href = tabs[active].href), 120);
  };

  // Listeners
  bar.addEventListener('mousedown', onDown);
  bar.addEventListener('touchstart', onDown, { passive: true });
  window.addEventListener('mousemove', onMove, { passive: false });
  window.addEventListener('touchmove', onMove, { passive: true });
  window.addEventListener('mouseup', onUp, { passive: true });
  window.addEventListener('touchend', onUp, { passive: true });

  // Auto-hide on scroll
  let lastScroll = 0;
  window.addEventListener('scroll', () => {
    const cur = window.scrollY || 0;
    if (cur > lastScroll + 8 && cur > 60) bar.classList.add('toolbar-hidden');
    else if (cur < lastScroll - 8 || cur < 60) bar.classList.remove('toolbar-hidden');
    lastScroll = cur;
  }, { passive: true });
})();
</script>
</body>
</html>
