/* ======================================================= */
/* ========== APPLE MUSIC BLACK LIQUID (A2) ============== */
/* ======================================================= */

/* -------------------------- */
/* Keep your root variables   */
/* -------------------------- */
:root {
    /* Base */
    --font-size-base: 16px;
    --line-height-base: 1.65;

    /* Accent */
    --accent-color: #007aff;
    --accent-color-rgb: 0,122,255;

    /* Light variables (fallback) */
    --light-bg: #f2f2f7;
    --light-content-bg: #ffffff;
    --light-text: #000;
    --light-secondary-text: #8a8a8e;
    --light-border: #c6c6c8;

    /* Dark variables (fallback) */
    --dark-bg: #000;
    --dark-content-bg: #1c1c1e;
    --dark-text: #fff;
    --dark-secondary-text: #8d8d93;
    --dark-border: #38383a;

    /* Radii */
    --radius-xl: 26px;
    --radius-lg: 20px;
    --radius-md: 12px;

    /* Glass control (optional backdrop usage) */
    --glass-blur: blur(24px) saturate(160%) contrast(105%);

    /* Button sizes */
    --btn-padding-y: 10px;
    --btn-padding-x: 18px;

    /* Shadows */
    --shadow-deep: 0 20px 48px rgba(0,0,0,0.55);
    --shadow-soft: 0 12px 30px rgba(0,0,0,0.25);

    /* Accessibility */
    --focus-ring: 0 0 0 3px rgba(0,122,255,0.18);
}

/* -------------------------- */
/* Theme base (applied values)*/
/* -------------------------- */
body {
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", "Helvetica Neue", Roboto, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    margin: 0;
    padding: 32px;
    line-height: var(--line-height-base);
    font-size: var(--font-size-base);
    background-color: var(--bg-color, var(--light-bg));
    color: var(--text-color, var(--light-text));
}

/* -------------------------- */
/* Light / Dark theme rules   */
/* -------------------------- */
body.light-e {
    --bg-color: var(--light-bg);
    --content-bg: var(--light-content-bg);
    --text-color: var(--light-text);
    --secondary-text: var(--light-secondary-text);
    --border-color: var(--light-border);

    /* Light-mode liquid base (pearly) */
    --liquid-base-bg: linear-gradient(135deg,
        rgba(255,255,255,0.92) 0%,
        rgba(250,250,250,0.95) 60%);
    --liquid-top-sheen: radial-gradient(circle at 50% 8%,
        rgba(255,255,255,0.95),
        rgba(255,255,255,0.65) 36%,
        transparent 70%);
    --liquid-bottom-curve: radial-gradient(circle at 50% 100%,
        rgba(0,0,0,0.06),
        transparent 70%);
    --liquid-border: rgba(0,0,0,0.06);
    --liquid-inner-highlight: rgba(255,255,255,0.85);
    --liquid-text: #111;
    --liquid-subtext: #444;
    --panel-shadow: 0 18px 48px rgba(0,0,0,0.12);
}

body.dark-mode {
    --bg-color: var(--dark-bg);
    --content-bg: var(--dark-content-bg);
    --text-color: var(--dark-text);
    --secondary-text: var(--dark-secondary-text);
    --border-color: var(--dark-border);

    /* Dark-mode liquid base (black gel) */
    --liquid-base-bg: linear-gradient(145deg,
        rgba(255,255,255,0.20) 0%,
        rgba(255,255,255,0.06) 40%,
        rgba(0,0,0,0.85) 100%);
    --liquid-top-sheen: radial-gradient(circle at 50% 6%,
        rgba(255,255,255,0.60),
        rgba(255,255,255,0.20) 36%,
        transparent 70%);
    --liquid-bottom-curve: radial-gradient(circle at 50% 100%,
        rgba(0,0,0,0.40),
        transparent 70%);
    --liquid-border: rgba(255,255,255,0.12);
    --liquid-inner-highlight: rgba(255,255,255,0.14);
    --liquid-text: #fff;
    --liquid-subtext: #cfcfcf;
    --panel-shadow: var(--shadow-deep);
}

/* -------------------------- */
/* Base typography & spacing  */
/* -------------------------- */
h1,h2,h3 { font-weight: 600; letter-spacing: -0.02em; margin: 0 0 8px 0; color: var(--liquid-text); }
p, span, li { color: var(--secondary-text, var(--liquid-subtext)); margin: 0; }

/* ================================================== */
/* ================ LIQUID PANELS =================== */
/* ================================================== */

/* Generic .section (Apple Music style liquid) */
.section {
    position: relative;
    padding: 28px;
    margin-bottom: 32px;
    border-radius: var(--radius-xl);
    overflow: hidden;
    background: var(--liquid-base-bg);
    border: 1px solid var(--liquid-border);
    box-shadow:
        var(--panel-shadow),
        inset 0 1px 1px rgba(255,255,255,0.03);
    transition: background 0.12s ease, box-shadow 0.12s ease;
}

/* Top glossy sheen (always visible) */
.section::before {
    content: "";
    position: absolute;
    top: -18%;
    left: 0;
    right: 0;
    height: 52%;
    pointer-events: none;
    background: var(--liquid-top-sheen);
    opacity: 0.85;
    mix-blend-mode: screen;
}

/* Bottom curve for depth */
.section::after {
    content: "";
    position: absolute;
    bottom: -18%;
    left: 0;
    right: 0;
    height: 55%;
    pointer-events: none;
    background: var(--liquid-bottom-curve);
    opacity: 0.85;
    mix-blend-mode: multiply;
}

/* Light-mode overrides for text */
body.light-e .section h1, body.light-e .section h2, body.light-e .section h3 { color: var(--liquid-text); }
body.light-e .section p, body.light-e .section span, body.light-e .section li { color: var(--liquid-subtext); }

/* Dark-mode text */
body.dark-mode .section h1, body.dark-mode .section h2, body.dark-mode .section h3 { color: var(--liquid-text); }
body.dark-mode .section p, body.dark-mode .section span, body.dark-mode .section li { color: var(--liquid-subtext); }

/* ================================================== */
/* =================== BUTTONS ======================= */
/* ================================================== */

/* Base button used across UI */
.button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: var(--btn-padding-y) var(--btn-padding-x);
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
    border: 1px solid transparent;
    position: relative;
    overflow: hidden;
    transition: transform .06s ease, box-shadow .12s ease, background .12s ease;
    -webkit-font-smoothing: antialiased;
}

/* Prominent accent button (like Play / Follow) */
.button-prominent {
    color: #fff;
    background:
      linear-gradient(135deg, color-mix(in srgb, var(--accent-color) 18%, black) 0%, var(--accent-color) 100%);
    box-shadow:
      0 8px 26px rgba(var(--accent-color-rgb), 0.28),
      inset 0 1px 0 rgba(255,255,255,0.12);
    border: 1px solid color-mix(in srgb, var(--accent-color) 28%, transparent);
}

/* Subtle secondary button (dark-light adapted) */
.button-subtle {
    color: var(--liquid-text);
    background: linear-gradient(145deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
    border: 1px solid color-mix(in srgb, var(--content-bg) 30%, transparent);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.03), 0 6px 18px rgba(0,0,0,0.18);
}

/* Button glossy sheen */
.button::before {
    content: "";
    position: absolute;
    top: -35%;
    left: 0;
    right: 0;
    height: 60%;
    pointer-events: none;
    background: radial-gradient(circle at 50% 0%,
        rgba(255,255,255,0.38),
        rgba(255,255,255,0.14) 40%,
        transparent 80%);
    opacity: 0.85;
}

/* Button focus */
.button:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
    border-color: color-mix(in srgb, var(--accent-color) 50%, transparent);
}

/* Button sizes */
.button-sm { padding: 8px 12px; border-radius: 10px; font-size: .875rem; }
.button-lg { padding: 12px 22px; border-radius: 14px; font-size: 1rem; }

/* Light / Dark tweaks */
body.light-e .button-subtle { background: linear-gradient(145deg, rgba(255,255,255,0.9), rgba(255,255,255,0.75)); border: 1px solid rgba(0,0,0,0.06); box-shadow: 0 8px 20px rgba(0,0,0,0.06); color: #111; }
body.dark-mode .button-subtle { background: linear-gradient(145deg, rgba(255,255,255,0.12), rgba(255,255,255,0.03)); color: var(--liquid-text); }

/* ================================================== */
/* =================== TOGGLE (MD SWITCH) =========== */
/* ================================================== */
.md-switch {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: flex-end;
  width: 56px;
  height: 34px;
  border-radius: 999px;
  padding: 4px;
  box-sizing: border-box;
}

.md-switch .track {
  position: absolute;
  inset: 0;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(0,0,0,0.08));
  border: 1px solid color-mix(in srgb, var(--content-bg) 18%, transparent);
  box-shadow: inset 0 1px 2px rgba(255,255,255,0.04), 0 6px 16px rgba(0,0,0,0.18);
  transition: background .24s ease, box-shadow .24s ease;
}

.md-switch .thumb {
  position: relative;
  width: 28px;
  height: 28px;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.88));
  box-shadow: 0 6px 14px rgba(0,0,0,0.22), inset 0 1px 0 rgba(255,255,255,0.9);
  transform: translateX(0);
  transition: transform .28s cubic-bezier(.25,.8,.25,1), box-shadow .12s ease;
}

/* Checked state via input:checked + .track (assumes markup: input + .track with .thumb inside) */
.md-switch input:checked + .track {
  background: linear-gradient(180deg, color-mix(in srgb, var(--accent-color) 55%, black), var(--accent-color));
  box-shadow: 0 8px 26px color-mix(in srgb, var(--accent-color) 30%, rgba(0,0,0,0.25));
  border-color: color-mix(in srgb, var(--accent-color) 30%, transparent);
}
.md-switch input:checked + .track .thumb { transform: translateX(22px); background: rgba(255,255,255,0.98); box-shadow: 0 10px 28px color-mix(in srgb, var(--accent-color) 22%, rgba(0,0,0,0.3)); }

/* Accessibility Disabled */
.md-switch.disabled { opacity: 0.5; pointer-events: none; }

/* ================================================== */
/* =================== SLIDER ======================== */
/* ================================================== */
input[type="range"] {
  -webkit-appearance: none;
  width: 100%;
  height: 10px;
  background: linear-gradient(90deg, var(--accent-color) 0%, var(--accent-color) var(--_fill, 30%), var(--slider-track-color, #e9e9eb) var(--_fill, 30%), var(--slider-track-color, #e9e9eb) 100%);
  border-radius: 999px;
  outline: none;
  border: 0;
  box-shadow: inset 0 1px 1px rgba(255,255,255,0.06);
}
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 28px; height: 28px; border-radius: 50%;
  background: #fff;
  box-shadow: 0 8px 20px rgba(0,0,0,0.25), inset 0 1px 1px rgba(255,255,255,0.85);
  border: 1px solid rgba(0,0,0,0.06);
  cursor: pointer;
}

/* ================================================== */
/* ============== SEGMENTED CONTROL ================== */
/* ================================================== */
.segmented-control {
  position: relative;
  display: flex;
  align-items: center;
  background: color-mix(in srgb, var(--content-bg) 72%, transparent);
  border-radius: 999px;
  padding: 4px;
  gap: 6px;
  border: 1px solid color-mix(in srgb, var(--accent-color) 12%, transparent);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.03);
}

.segmented-control button {
  position: relative;
  z-index: 2;
  background: transparent;
  border: none;
  padding: 8px 14px;
  border-radius: 999px;
  color: var(--text-color);
  font-weight: 600;
  cursor: pointer;
}
.segmented-control .seg-bg {
  position: absolute;
  z-index: 1;
  top: 4px;
  bottom: 4px;
  left: 4px;
  width: calc(33% - 8px);
  border-radius: 999px;
  background: color-mix(in srgb,var(--accent-color) 36%, var(--content-bg));
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.06),
    0 8px 20px color-mix(in srgb,var(--accent-color) 8%, rgba(0,0,0,0.2));
  transition: left .28s cubic-bezier(.22,.98,.45,1), width .28s cubic-bezier(.22,.98,.45,1);
}

/* Dark-mode segmented tuning */
body.dark-mode .segmented-control .seg-bg { background: color-mix(in srgb,var(--accent-color) 40%, color-mix(in srgb,var(--content-bg) 20%, black)); }

/* ================================================== */
/* ================= DOCK (onyx-dock) ================ */
/* ================================================== */
.onyx-dock {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--content-bg) 82%, transparent);
  border: 1px solid color-mix(in srgb,var(--border-color) 70%, transparent);
  box-shadow: 0 8px 26px rgba(0,0,0,0.32);
  z-index: 9999;
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
}

.dock-item {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 12px;
  border-radius: 999px;
  color: var(--text-color);
  text-decoration: none;
  transition: transform 0.12s ease, color 0.12s ease;
}

.dock-item:hover { transform: translateY(-6px) scale(1.06); color: var(--accent-color); }
.dock-item.active { background: color-mix(in srgb, var(--accent-color) 12%, transparent); box-shadow: 0 8px 22px color-mix(in srgb,var(--accent-color) 10%, rgba(0,0,0,0.25)); color: var(--accent-color); }

/* Spotlight glow (subtle) */
.dock-item::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: -1;
  background-image: radial-gradient(40px circle at var(--x,50%) var(--y,50%), rgba(var(--accent-color-rgb),0.12), transparent 60%);
  opacity: 0;
  transition: opacity 0.18s ease;
}
.dock-item:hover::before { opacity: 1; }

/* Dock icon transform (parallax) */
.dock-icon { width: 18px; height: 18px; margin-bottom: 2px; transition: transform .12s linear; }

/* ================================================== */
/* ============ CUSTOM BG PREVIEW (BUBBLE) ========== */
/* ================================================== */
#customBgPreviewContainer {
  width: 110px;
  height: 110px;
  border-radius: 50%;
  overflow: hidden;
  display: none;
  background: color-mix(in srgb, var(--content-bg) 85%, transparent);
  box-shadow: 0 6px 22px rgba(0,0,0,0.28), inset 0 0 16px rgba(255,255,255,0.03);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  transition: transform .28s cubic-bezier(.25,.8,.25,1), opacity .28s ease;
}
#customBgPreviewContainer.visible { display: block; opacity: 1; transform: scale(1); }

/* Preview image */
#customBgPreview { width: 100%; height: 100%; object-fit: cover; display: block; }

/* ================================================== */
/* ============= COOKIE BANNER & FOOTER ============= */
/* ================================================== */
#cookie-consent-banner {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 12px;
  align-items: center;
  padding: 12px 16px;
  border-radius: 12px;
  background: var(--liquid-base-bg);
  border: 1px solid var(--liquid-border);
  box-shadow: var(--shadow-soft);
  z-index: 12000;
}

/* Footer */
body.settings-page footer {
  text-align: center;
  padding: 1.25rem;
  font-size: 0.875rem;
  color: var(--secondary-text);
}

/* ================================================== */
/* ================== HIGH CONTRAST ================== */
/* ================================================== */
body.high-contrast {
  --accent-color: #ffcc00;
  --accent-color-rgb: 255,204,0;
  --liquid-base-bg: linear-gradient(135deg, rgba(255,255,255,0.98), rgba(250,250,250,0.98));
  --liquid-top-sheen: radial-gradient(circle at 50% 6%, rgba(255,255,255,1), rgba(255,255,255,0.8) 40%, transparent 70%);
  --liquid-bottom-curve: radial-gradient(circle at 50% 100%, rgba(0,0,0,0.12), transparent 70%);
  --liquid-border: rgba(0,0,0,0.85);
  --text-color: #fff;
  --secondary-text: #fff;
  --panel-shadow: 0 10px 40px rgba(0,0,0,0.8);
  filter: none;
}

/* ================================================== */
/* ================= ACCESSIBILITY =================== */
/* ================================================== */
:focus { outline: none; }
:focus-visible {
  box-shadow: var(--focus-ring);
}

/* Motion disabled helper */
.motion-disabled * { transition: none !important; animation: none !important; }

/* ================================================== */
/* =================== UTILITIES ===================== */
/* ================================================== */
.container { max-width: 1150px; margin: 0 auto; padding: 0 20px; }

/* small helpers for spacing */
.row { display:flex; gap:12px; align-items:center; }
.col { display:flex; flex-direction:column; gap:8px; }

/* Responsive tweaks */
@media (max-width: 768px) {
  .section { padding: 20px; margin-bottom: 18px; border-radius: 18px; }
  .onyx-dock { bottom: 12px; padding: 6px; gap: 6px; }
  .container { padding: 0 14px; }
}

/* ================================================== */
/* ============ BACKWARDS COMPAT (legacy classes) ==== */
/* ================================================== */
/* Keep compatibility with previously named classes in your codebase */
.settings-header, .settings-subsection, .profile-card, .setting-card {
    /* Make these the liquid style too */
    background: var(--liquid-base-bg);
    border: 1px solid var(--liquid-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--panel-shadow);
    padding: 12px;
}

/* .setting-card hover */
.setting-card:hover { transform: translateY(-3px); box-shadow: 0 28px 64px rgba(0,0,0,0.45); }

/* Danger zone tint preserved but liquid-ified */
.danger-zone .settings-subsection {
  background: color-mix(in srgb, var(--red-color, #ff3b30) 12%, var(--liquid-base-bg));
  border: 1px solid color-mix(in srgb, var(--red-color, #ff3b30) 40%, transparent);
}

/* ================================================== */
/* ============ CONSUMER-SIDE INLINE FIXES ========== */
/* ================================================== */

/* If you use inline small profile icon containers */
.profile-pic-wrapper { display:inline-flex; align-items:center; gap:12px; }
.profile-pic {
  width: 84px; height:84px; border-radius: 20px; object-fit:cover;
  box-shadow: 0 10px 30px rgba(0,0,0,0.45);
  border: 1px solid rgba(255,255,255,0.06);
}

/* Status badges */
.status-online { background: linear-gradient(180deg, #1dd760, #0f9a3a); box-shadow: 0 6px 14px rgba(0,0,0,0.28); border-radius:999px; padding:4px 8px; color:#fff; font-weight:600; }

/* Toast container (liquid) */
#toast-container { position: fixed; right: 20px; bottom: 20px; z-index: 15000; display:flex; flex-direction:column; gap:10px; }

/* ================================================== */
/* ============ FINAL TUNES & FALLBACKS ============= */
/* ================================================== */
/* Make sure default content background variable exists */
:root { --content-bg: var(--light-content-bg); }
body.dark-mode { --content-bg: var(--dark-content-bg); }

/* Ensure sliders, selects and dropdowns match liquid */
select, textarea, input[type="text"], input[type="search"], .search-container input {
  border-radius: 10px;
  padding: 10px 12px;
  background: color-mix(in srgb, var(--content-bg) 90%, transparent);
  border: 1px solid color-mix(in srgb, var(--border-color) 80%, transparent);
  color: var(--text-color);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.03);
}

/* ================================================== */
/* ================ END OF FILE ===================== */
/* ================================================== */
